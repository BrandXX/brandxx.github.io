---
interface Props {
  currentPath: string;
}

const { currentPath } = Astro.props;

const links = [
  { href: '/work', label: 'Work' },
  { href: '/services', label: 'Services' },
  { href: '/training', label: 'Training' },
  { href: '/ai-lab', label: 'AI Lab' },
  { href: '/open-source', label: 'Open Source' },
  { href: '/contact', label: 'Contact' }
];

const isActive = (href: string) =>
  currentPath === href || (href !== '/' && currentPath.startsWith(`${href}/`));
---

<header class="relative mx-auto max-w-6xl px-6 pt-6">
  <nav class="rounded-2xl border border-zinc-300/40 bg-white/70 px-4 py-3 backdrop-blur dark:border-white/10 dark:bg-white/5">
    <div class="flex items-center justify-between gap-3">
      <a href="/" class="flex items-center gap-3" aria-label="TechSoft Systems home">
        <img src="/logo-mark.svg" alt="" class="h-9 w-9 rounded-xl" />
        <div class="leading-tight">
          <div class="font-semibold tracking-tight">TechSoft Systems</div>
          <div class="text-xs text-zinc-600 dark:text-zinc-400">Private AI & Infrastructure Engineering</div>
        </div>
      </a>

      <div class="flex items-center gap-2">
        <button
          id="themeBtn"
          type="button"
          aria-label="Toggle theme"
          class="rounded-xl border border-zinc-300/60 bg-white px-3 py-2 text-xs text-zinc-800 transition hover:bg-zinc-100 dark:border-white/10 dark:bg-white/5 dark:text-zinc-200 dark:hover:bg-white/10"
        >
          Toggle theme
        </button>
        <a
          href="/contact"
          class="rounded-xl bg-zinc-900 px-3 py-2 text-xs font-semibold text-zinc-50 transition hover:bg-zinc-700 dark:bg-white dark:text-zinc-900 dark:hover:bg-zinc-200"
        >
          Book a consult
        </a>
      </div>
    </div>

    <div class="mt-3 flex flex-wrap gap-4 text-sm text-zinc-700 dark:text-zinc-300">
      {links.map((link) => (
        <a
          href={link.href}
          class:list={[
            'transition hover:text-zinc-950 dark:hover:text-white',
            isActive(link.href) && 'text-zinc-950 dark:text-white'
          ]}
          aria-current={isActive(link.href) ? 'page' : undefined}
        >
          {link.label}
        </a>
      ))}
    </div>
  </nav>
</header>

<script>
  const button = document.getElementById('themeBtn');
  button?.addEventListener('click', () => {
    document.documentElement.classList.toggle('dark');
    localStorage.setItem(
      'theme',
      document.documentElement.classList.contains('dark') ? 'dark' : 'light'
    );
  });
</script>
